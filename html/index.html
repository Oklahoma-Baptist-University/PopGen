<!DOCTYPE html>
<html lang="en">
    <head>
        <script src = "header.js"></script>
        <link rel="stylesheet" href="turing-defaults.css">
        <link rel="stylesheet" href="turing-default-page.css">
    </head>
    <body>
        <section class="information">
            <article class="center">
                <h1>Population Genealogy Simulatin</h1>
                <div id="simple"></div>
                <script>
                    async function showResults(){
                        
                        var url = new URL("http://localhost:8080/popgen?1000&0.5");

                        console.log(url.toString())
                        
                        const response = await fetch(url);

                        console.log(response)

                        const myJson = await response.json(); 

                        console.log(myJson)

                        predictedClass = document.getElementById("simple").innerHTML = 
                            "<br><table class=\"beautiful\" >\n" +
                                "<tbody" + 
                                    "<tr>" +
                                        "<td>Total population at the bottom of the tree:</td>" + 
                                        "<td class=\"number\">" + myJson.pop + "</td>" +
                                    "</tr>\n" +
                                    "<tr>" +
                                        "<td>Number of generations until A/E couple emerged:</td>" + 
                                        "<td class=\"number\">" + myJson.num_gens + "</td>" +
                                    "</tr>" +
                                    "<tr>" +
                                        "<td>Number of ancestral couples still in gene pool at simulation end:</td>" + 
                                        "<td class=\"number\">" + myJson.num_anc_rep/2 + "</td>" +
                                    "</tr>" +
                                    "<tr>" +
                                        "<td>Number of A/E couples at simulation end:</td>" + 
                                        "<td class=\"number\">" + myJson.num_ae_couples + "</td>" +
                                    "</tr>" +
                                    "<tr>" +
                                        "<td>Number of ancestral couples who are ancestors of 90 + percent of final generation:</td>" + 
                                        "<td class=\"number\">" + myJson.almost_ae + "</td>" +
                                    "</tr>" +
                                "</tbody>" +
                            "</table><br>";
                    }
                </script>
                <p id="predicted-class"></p>
                <div class="center">
                    <button type="show results" onclick="showResults()" id="submit">Run Simulation</button>
                </div>
            </article>
        </section>
    </body>
    <footer>
        <script src = footer.js></script>
    </footer>
</html>